<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5" />

  <title>
  
    Considerations for Standalone Theme Releases | HugoModo - A modular Hugo framework.
  
</title>


  <meta name="description" content="A modular Hugo framework." />

  
  



  
    
  

  
    
  

  







  
  

  

  
  

  

  
  

  





  

  
    
    <link rel="stylesheet" type="text/css" href="/css/style.min.c98e99349d49e91b5f15c58c4689712907848ad8a5c730a449e383c1d900ec26.css" integrity="sha256-yY6ZNJ1J6RtfFcWMRolxKQeEitilxzCkSeODwdkA7CY=" crossorigin="anonymous">
  


  


  
  


  
  
  

<meta itemprop="name" content="Considerations for Standalone Theme Releases">
<meta itemprop="description" content="With the release of HugoModo version 0.1, I&rsquo;ve turned my consideration to the child themes which inherit its features. The plan is to introduce versioning to these as well, but also an additional flavour called standalone. So as well as a 0.1.0 branch, child themes will also feature a 0.1.0-standalone branch and release files that will ultimately make it easier to use HugoModo themes that may have one or two to many levels of inheritance.">


<meta itemprop="datePublished" content="2019-02-04T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-02-04T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1362">



<meta itemprop="keywords" content="" />


  
  <meta property="og:title" content="Considerations for Standalone Theme Releases" />
  <meta property="og:description" content="With the release of HugoModo version 0.1, I&rsquo;ve turned my consideration to the child themes which inherit its features. The plan is to introduce versioning to these as well, but also an additional flavour called standalone. So as well as a 0.1.0 branch, child themes will also feature a 0.1.0-standalone branch and release files that will ultimately make it easier to use HugoModo themes that may have one or two to many levels of inheritance." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://hugomodo.github.io/blog/considerations-for-standalone-theme-releases/" />

  


<meta property="article:published_time" content="2019-02-04T00:00:00&#43;00:00"/>
  <meta property="article:modified_time" content="2019-02-04T00:00:00&#43;00:00"/>


  
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Considerations for Standalone Theme Releases"/>
<meta name="twitter:description" content="With the release of HugoModo version 0.1, I&rsquo;ve turned my consideration to the child themes which inherit its features. The plan is to introduce versioning to these as well, but also an additional flavour called standalone. So as well as a 0.1.0 branch, child themes will also feature a 0.1.0-standalone branch and release files that will ultimately make it easier to use HugoModo themes that may have one or two to many levels of inheritance."/>


  



  
  


  
    
  

  
    
  

  

  





  
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">


  
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#252e39"
    },
    "button": {
      "background": "#14a7d0"
    }
  },
  "theme": "classic",
  "position": "bottom-left"
})});
</script>



  




  
  
  
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-58994131-3', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>



</head>
<body id="hugoModule-body">
    <div id="hugoModule-bodyWrapper"><header id="hugoModule-siteHeader">
  <strong id="hugoModule-siteTitle">
    <a title="HugoModo" href="/">HugoModo</a>
  </strong>
  

  
  <nav id="hugoModule-siteNav">
    <ul>
      
      
      
        
          <li>
            <a href="https://hugomodo.github.io/blog/" title="Blog">Blog</a>
          </li>
        
      
        
          <li>
            <a href="https://hugomodo.github.io/docs/" title="Docs">Docs</a>
          </li>
        
      
        
          <li>
            <a href="https://hugomodo.github.io/extensions/" title="Extensions">Extensions</a>
          </li>
        
      
        
          <li>
            <a href="https://hugomodo.github.io/themes/" title="Themes">Themes</a>
          </li>
        
      
        
          <li>
            <a href="https://hugomodo.github.io/search/" title="Search">Search</a>
          </li>
        
      
    </ul>
  </nav>




</header>

  <main id="hugoModule-main">
    <header id="hugoModule-mainHeader">
      <nav class="hugoComponent-breadcrumbNav" aria-label="breadcrumb">
  <ul class="breadcrumbs">
    
  
    
  
    
  

  
    
  

  <li class="">
    
      <a href="https://hugomodo.github.io/">HugoModo</a>
    
  </li>

  

  
    
  

  <li class="">
    
      <a href="https://hugomodo.github.io/blog/">Blog</a>
    
  </li>

  

  
    
  

  <li class="active">
    
      
        Considerations for Standalone Theme Releases
      
    
  </li>

  </ul>
</nav>



    </header>
    <article id="hugoModule-mainArticle">
      

      <header>
  <h1>Considerations for Standalone Theme Releases</h1>
</header>

      <aside>
  <dl>
    <dt>Published</dt>
<dd><time datetime="2019-02-04T00:00:00&#43;00:00" itemprop="datePublished">04 Feb 2019</time></dd>


    

    
  <dt>Reading time</dt>
  <dd><time datetime="7m">7 minutes</time></dd>



    



   
  
  
    <dt>Authors</dt>
    
      
      
      
        <dd>
          <a href="/authors/thom-bruce">
            Thom Bruce
          </a>
        </dd>
      
    
  

   
  
  

   
  
  

   
  
  


  </dl>
</aside>

      


  <aside>
    <header>
      <h2>Table of Contents</h2>
    </header>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#how-hugomodo-currently-works">How HugoModo Currently Works</a></li>
<li><a href="#submodules-within-submodules">Submodules within Submodules</a></li>
<li><a href="#copy-theme-files">Copy Theme Files</a></li>
</ul></li>
</ul>
</nav>
  </aside>


      <div>
  
    
      
    
      
    
      
        
      
    
      
        
      
    

    

    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      
      <p>With the release of HugoModo version 0.1, I&rsquo;ve turned my consideration to the child themes which inherit its features. The plan is to introduce versioning to these as well, but also an additional flavour called <em>standalone</em>. So as well as a <code>0.1.0</code> branch, child themes will also feature a <code>0.1.0-standalone</code> branch and release files that will ultimately make it easier to use HugoModo themes that may have one or two to many levels of inheritance. At present, to use a HugoModo theme one must also download and include the base theme in their project. This is a minimal inconvenience when the theming goes just a couple of levels deep, but as I add more themes and adaptations of child themes, it&rsquo;s going to potentially become a bit of a burden, and certainly it goes against the goal to make HugoModo easy to use.</p>

<h2 id="how-hugomodo-currently-works">How HugoModo Currently Works</h2>

<p>Let&rsquo;s take the first theme I&rsquo;ve developed for HugoModo, based on the excellent <em>The Best Motherfucking Website</em> by <a href="https://denv.it/" title="Denys Vitali's Website">Denys Vitali</a>. The theme is called <em>HugoModo Best Motherfucking Website</em>, and to use it requires you take two steps.</p>

<p>First, you have to add not only that theme but the base HugoModo theme to your Hugo site. That might look a little something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git submodule add https://github.com/hugomodo/hugomodo themes/hugomodo
git submodule add https://github.com/hugomodo/hugomodo-best-motherfucking-website themes/hugomodo-best-motherfucking-website</code></pre></div>
<p>Then, you need to utilise the themes in your project. The child theme already includes the base theme for you, so you only need to add this to your Hugo config:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#a6e22e">theme</span> = [
  <span style="color:#e6db74">&#34;hugomodo-best-motherfucking-website&#34;</span>
]</code></pre></div>
<p>Nothing too complicated. But as we add themes that might inherit from the child theme, then additional themes that inherit from those (as is likely to be the case as I adapt a number of Bootstrap templates), that first step is going to become a big one. That won&rsquo;t do.</p>

<p>Better would be, regardless of the depth of inheritance, a single step like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git submodule add -b standalone https://github.com/hugomodo/hugomodo-best-motherfucking-website themes/hugomodo-best-motherfucking-website</code></pre></div>
<p>One command with just one small change, the option to use the <code>standalone</code> branch with <code>-b standalone</code>.</p>

<p>That&rsquo;s the future of HugoModo, I just need to figure out how to achieve it.</p>

<h2 id="submodules-within-submodules">Submodules within Submodules</h2>

<p>This is the first method I&rsquo;ve tried. I&rsquo;d been super hopeful about it for a long time, and it mostly works.</p>

<p>See, when you&rsquo;re inside a Git submodule, it&rsquo;s just like any other repo. It is just another repo, which means it can also have submodules included.</p>

<p>My cunning plan to incorporate the base theme into standalone versions of child themes was to include the base theme in a <code>themes</code> directory within the child theme, which itself of course would be in the Hugo site&rsquo;s <code>themes</code> directory.</p>

<p>Then, rather than including <code>theme = [&quot;hugomodo&quot;]</code> in a child theme, I would instead include in the theme config:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#a6e22e">theme</span> = [
  <span style="color:#e6db74">&#34;hugomodo-best-motherfucking-website/themes/hugomodo&#34;</span>
]</code></pre></div>
<p>I was hesitant about this setup, but in my early tests it worked!</p>

<p>There were drawbacks. This would only really work for one level of theme inheritance, where down the line I might go several themes deep. But this could be worked around inheriting from the standalone branches of those intermediary themes - a sort of chain of standalone inheritance. That would be absolutely fine.</p>

<p>But I&rsquo;ve made some changes to how HugoModo works recently. Changes for the better - they make it more extendible, more modular (the <em>Modo</em> in <em>HugoModo</em>).</p>

<p>In my most recent attempt to work through this approach, I&rsquo;ve ran up against a wall with data files. In the submodule-based standalone version, Hugo can no longer locate the data files of the base theme, which I&rsquo;ve used to make resource and asset extendibility a breeze.</p>

<p>Since I won&rsquo;t rollback the resource extendibility, this method is now a no-go.</p>

<h2 id="copy-theme-files">Copy Theme Files</h2>

<p>This is the other option, and while it isn&rsquo;t ideal I think it&rsquo;s going to be the only way to have this work.</p>

<p>The idea is to create a <code>standalone</code> branch which reflects the current state of the main developments on <code>master</code>, then to copy files from the parent theme respecting and not replacing any that already exist in the child theme. This can be achieved relatively easily, like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp -rn hugomodo hugomodo-best-motherfucking-website</code></pre></div>
<p>The <code>r</code> and <code>n</code> flags tell the copy command to perform the copy recursively - meaning all files in all subdirectories - and to &ldquo;not clobber&rdquo; the destination files - meaning don&rsquo;t replace anything if it already exists. This way, the child theme will gain all of the files present in the parent but any overwrites will be respected and remain untouched.</p>

<p>The full process then is to checkout the <code>standalone</code> branch, reset it to the state of <code>master</code>, and copy the parent theme&rsquo;s files:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout standalone
git reset master --hard
cp -rn ../hugomodo/. .</code></pre></div>
<p>As you can see, I&rsquo;ve slightly modified the <code>cp</code> command so it can be performed from the destination directory. <code>../hugomodo/.</code> means <em>look upwards one directory level for the hugomodo directory, and copy its root contents</em>. <code>.</code> doesn&rsquo;t really mean <em>root directory</em>, but for our purposes it&rsquo;s a fair explanation. The final <code>.</code> on its own means <em>the current directory</em>. In plain English, <em>go up one directory level, find hugomodo, copy its root contents into the current directory; do so recursively, respecting any files which already exist</em>. Or <em>copy recursive no-clobber hugomodo into this directory</em>.</p>

<p>Following this, the state of the <code>standalone</code> branch will be a match to the <code>master</code> development branch <em>plus</em> the contents of the parent theme. Enough then to <em>stand alone</em>. We commit the changes and push to GitHub:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add -A
git commit -m <span style="color:#e6db74">&#34;rebuild standalone from master&#34;</span>
git push origin standalone --force</code></pre></div>
<p>We have to force push here, because of our earlier <code>reset</code> - it destroys the branch history.</p>

<p>With that, I&hellip; <em>almost</em> have a perfect <code>standalone</code> branch. There&rsquo;s just one more thing. After reseting to the state of <code>master</code> but before copying the parent files, I have to add:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">rm -f config.toml</code></pre></div>
<p>This <code>rm</code> <em>removes</em> the file <code>config.toml</code>, and does so <em>forcefully</em>. We need to remove the child theme config file, because it&rsquo;s what tells Hugo to <em>also</em> look for a parent theme, which we won&rsquo;t be using with this setup. We also need to adopt the config of the parent theme, to ensure that the default configuration settings are inherited.</p>

<p>And with that, we have a <code>standalone</code> branch. I&rsquo;ve automated the entire task with a <a href="https://travis-ci.com/" title="Travis CI Continuous Integration">Travis CI</a> job, the full configuration for which is this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- stage: standalone
  script:
    - git checkout -B standalone
    - git reset master --hard
    - rm -f config.toml
    - cp -rn ../hugomodo/. . || <span style="color:#66d9ef">true</span>
    - git add -A
    - git commit -m <span style="color:#e6db74">&#34;rebuild from master&#34;</span>
    - git push -u origin standalone --force</code></pre></div>
<p><code>git checkout -B</code> does a forceful branching from master into our target branch, <code>standalone</code>. Strictly, I think the <code>-B</code> flag renders the reset redundant, since it&rsquo;s a forceful rebranch of the state of <code>master</code>, but I&rsquo;ve left the reset in for good measure. I added the <code>-B</code> so as to not assume the prior existence of the <code>standalone</code> branch - if it exists, that&rsquo;s fine, but if not this will make sure that it does. For that reason, I also have to say <code>git push -u</code>. The <code>-u</code> tells git to consider this destination the authority for this branch, which given that it&rsquo;s a new one (<code>-B</code>) we don&rsquo;t yet have; it&rsquo;s shorthand for <code>--set-upstream</code>.</p>

<p>There&rsquo;s only one change here I don&rsquo;t understand, and that&rsquo;s this: <code>cp -rn ../hugomodo/. . || true</code>. For some reason, the <code>cp</code> command was returning an error code and yet&hellip; <em>it was/is working</em>. I have no idea why at this time, so <code>|| true</code> is a hack that says <em>or return true</em> or <em>if what comes before this errors or fails, return true instead</em>. The line doesn&rsquo;t fail, but it returns a code like it does, hence the need for that.</p>

<p>Anyway, hey! That&rsquo;s <code>standalone</code> branches <strong>done!</strong></p>

<p>HugoModo Best Motherfucking Website now comes in a standalone flavour that doesn&rsquo;t require the base theme to work. Much easier installs for those who don&rsquo;t need the bleeding edge versions.</p>

<p>I&rsquo;ll be documenting the much improved installation process soon.</p>

    
  
</div>

      
        


  <footer>
    
    <section class="authors">
      <header>
        <h2>Author</h2>
      </header>
      
        
        
        
          <article class="author">
  



  
  
    <figure>
      <a href="https://hugomodo.github.io/authors/thom-bruce/">
        <img src="/uploads/thombruce.jpg" alt="Thom Bruce author image"/>
      </a>
    </figure>
  
  <header>
    <h4>
      <a href="https://hugomodo.github.io/authors/thom-bruce/">
        Thom Bruce
      </a>
    </h4>
  </header>
  <div class="bio">
    
      <p>Author, coder.</p>
    
  </div>
  
  <address>
    <dl>
      
        <dt>Email</dt>
        <dd><a href="mailto:thom@thombruce.com">thom@thombruce.com</a></dd>
      
      
  
    <dt>Website</dt>
    <dd><a href="https://thombruce.com/">https://thombruce.com/</a></dd>
  
  
    <dt>GitHub</dt>
    <dd><a href="https://github.com/thombruce">thombruce</a></dd>
  
  
    <dt>Facebook</dt>
    <dd><a href="https://facebook.com/thombruce">thombruce</a></dd>
  
  
    <dt>Twitter</dt>
    <dd><a href="https://twitter.com/thombruce">thombruce</a></dd>
  
  
  
    <dt>LinkedIn</dt>
    <dd><a href="https://linkedin.com/in/thombruce">thombruce</a></dd>
  
  


    </dl>
  </address>




</article>

        
      
    </section>
  </footer>


      
    </article>
    


    <footer id="hugoModule-mainFooter">
      
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugomodo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </footer>
  </main>
<footer id="hugoModule-siteFooter">
  <div id="hugoModule-siteFooterWrapper">
    
      <section id="hugoModule-siteFooterAboutSection"><h2>About HugoModo</h2>


  <p>A modular Hugo framework.</p>



  
  
  <address>
    <dl>
      
      
  
  
    <dt>GitHub</dt>
    <dd><a href="https://github.com/hugomodo">hugomodo</a></dd>
  
  
  
  
  
  


    </dl>
  </address>



</section>
    

    <section id="hugoModule-siteFooterNavSection"><h2>Sitemap</h2>



  <nav id="hugoModule-siteFooterNav">
    <ul>
      <li>
        <a href="/">Home</a>
      </li>
      
      
      
        <li>
          <a href="/blog/" title="Blog">Blog</a>
        </li>
      
        <li>
          <a href="/docs/" title="Docs">Docs</a>
        </li>
      
        <li>
          <a href="/extensions/" title="Extensions">Extensions</a>
        </li>
      
        <li>
          <a href="/themes/" title="Themes">Themes</a>
        </li>
      
      
        
          <li>
            <a href="https://hugomodo.github.io/search/" title="Search">Search</a>
          </li>
        
      
      
        
          <li>
            <a href="/authors" title="Authors">Authors</a>
          </li>
        
      
        
      
        
      
        
          <li>
            <a href="/tags" title="Tags">Tags</a>
          </li>
        
      
      <li>
        <a title="Subscribe" aria-label="Subscribe" href="/index.xml">
          RSS Feed
        </a>
      </li>
    </ul>
  </nav>

</section>

    








    <aside id="hugoModule-siteFooterCopyright">
      <p>
  &copy; 2019 HugoModo.
  Built with <a href='https://hugomodo.github.io/' target='_blank'>HugoModo</a>.
</p>

    </aside>
  </div>
</footer>



  
    
  

  

  

  





  
  <div id="contrast">
  Add more contrast
</div>

<div id="invmode">
  Inverted mode
</div>










  

  
    
  

  
    
  





  
  
  

  
  
  

  
  
  

  
  
  

  
  
  





  

  

  
    
    <script src="https://hugomodo.github.io/js/global.min.a0eb8d3d97ebd9f8dc07d64b140c5820c24085a8df9d53ab1b2faf15d64436ca.js" integrity="sha256-oOuNPZfr2fjcB9ZLFAxYIMJAhajfnVOrGy&#43;vFdZENso=" crossorigin="anonymous"></script>
  




</div>
  </body>
</html>
